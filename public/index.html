<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Pantry Order Fulfillment</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="/css/style.css" />
</head>
<body>
  <div class="app">

    <header class="app-header">
      <img class="logo" src="https://drive.google.com/uc?export=download&id=1QdKdMM-VHas0xgrCFpP_cITMn2ZZx7hY" alt="SPCA Logo"/>
      <div>
        <h1>Order Fulfillment</h1>
        <p class="muted">Scan a barcode or enter a 12-digit Form ID</p>
      </div>
    </header>

    <!-- Section: Scanner / Manual Entry -->
    <section class="card" id="scan-section">
      <div class="card-head">
        <h2>Lookup</h2>
        <div class="controls">
          <button id="btnStartCam" class="btn">Start Camera</button>
          <button id="btnStopCam" class="btn btn-ghost">Stop</button>
        </div>
      </div>

      <div class="scanner">
        <video id="video" playsinline></video>
        <canvas id="canvas" class="hidden"></canvas>
      </div>

      <div class="manual-entry">
        <label for="formIdInput">Form ID</label>
        <div class="row">
          <input id="formIdInput" inputmode="numeric" maxlength="12" placeholder="XXXXXXXXXXXX" />
          <button id="btnLookup" class="btn">Lookup</button>
        </div>
      </div>

      <p id="scanHelp" class="muted small">
        Tip: If your device doesn‚Äôt support barcode scanning, enter the Form ID above.
      </p>
    </section>

    <!-- Section: Result -->
    <section class="card" id="result-section" hidden>
      <div class="card-head">
        <h2>Order</h2>
        <button id="btnClear" class="btn btn-ghost">Clear</button>
      </div>

      <div id="orderSummary" class="summary"></div>

      <!-- Puppy/Kitten Reminder (computed from alerts) -->
      <div id="puppyKittenAlert" class="alert info" hidden>
        üêæ Puppy/Kitten noted on order. Remember to include appropriate food.
      </div>

      <!-- Flea/Tick flow -->
      <div class="card-sub">
        <h3>Flea / Tick Prevention</h3>
        <div class="row">
          <label class="chk"><input type="checkbox" id="chkFleaRequested" /> Client requested prevention</label>
          <label class="chk"><input type="checkbox" id="chkFleaProvided" /> Provided today</label>
        </div>
      </div>

      <!-- Label Count -->
      <div class="card-sub">
        <h3>How many labels?</h3>
        <div class="row">
          <input id="labelCount" type="number" min="1" max="5" value="2" />
          <button id="btnGenerate" class="btn primary">Create Labels</button>
        </div>
        <p class="muted small">Up to 5 per order.</p>
      </div>
    </section>

    <!-- Section: Activity -->
    <section class="card" id="activity-section" hidden>
      <div class="card-head">
        <h2>Status</h2>
      </div>
      <div id="activity" class="activity"></div>
    </section>

  </div>

  <!-- Confirmation Modal -->
  <dialog id="confirmModal">
    <form method="dialog" class="modal">
      <h3>Print & Notify?</h3>
      <p class="muted">
        Printing labels will notify the client that their order is ready. Proceed?
      </p>
      <div class="modal-actions">
        <button value="cancel" class="btn btn-ghost">Cancel</button>
        <button value="confirm" class="btn primary">Yes, Print</button>
      </div>
    </form>
  </dialog>

  <script src="/js/app.js" type="module"></script>
</body>
</html>